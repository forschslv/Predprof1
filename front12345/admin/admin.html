<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - –õ2–®</title>
    <link rel="stylesheet" href="../css/cafeteria_styles.css">
</head>
<body>
    <div class="container">
        <h1>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
        <div class="navigation-hub">
            <div class="button-group">
                <button onclick="window.location.href='admin_menu.html'">üç± –ë–∞–∑–∞ –±–ª—é–¥</button>
                <button onclick="window.location.href='admin_module.html'">üìÖ –ú–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é</button>
                <button onclick="window.location.href='admin_orders.html'">üí∞ –ó–∞–∫–∞–∑—ã –∏ –°—Ç–∞—Ç—É—Å—ã</button>
                <button onclick="window.location.href='admin_users.html'">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
                <button onclick="window.location.href='dashboard.html'" class="secondary">üè† –í –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</button>
            </div>
        </div>

        <div class="stats-box">
            <h2>–ë—ã—Å—Ç—Ä—ã–π –æ—Ç—á–µ—Ç –ø–æ –≤—ã—Ä—É—á–∫–µ</h2>
            <input type="date" id="summaryDate">
            <button onclick="getSummary()">–ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–¥–∫—É</button>
            <div id="summaryResult" style="margin-top:20px;"></div>
        </div>
    </div>

    <script src="../js/script.js"></script>
    <script>
        checkAuth(); requireAdmin();
        document.getElementById('summaryDate').value = new Date().toISOString().split('T')[0];

        async function getSummary() {
            const date = document.getElementById('summaryDate').value;
            const res = await apiRequest(`/admin/reports/summary?date_query=${date}`);
            let html = `<h3>–í—Å–µ–≥–æ –∑–∞ –¥–µ–Ω—å: ${res.total_revenue} ‚ÇΩ</h3><table><tr><th>–ë–ª—é–¥–æ</th><th>–ö–æ–ª-–≤–æ</th><th>–°—É–º–º–∞</th></tr>`;
            res.items.forEach(i => {
                html += `<tr><td>${i.dish}</td><td>${i.count}</td><td>${i.revenue} ‚ÇΩ</td></tr>`;
            });
            document.getElementById('summaryResult').innerHTML = html + `</table>`;
        }
    </script>
</body>
</html>