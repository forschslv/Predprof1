<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Пользователи - Админ</title>
    <link rel="stylesheet" href="../css/cafeteria_styles.css">
</head>
<body>
    <div class="container" style="max-width: 600px;">
        <h1>Управление правами</h1>
        <div class="inventory-item">
            <p>Назначить/снять права администратора</p>
            <input type="email" id="userEmail" placeholder="Загрузка почты...">
            <select id="isAdmin">
                <option value="true">Сделать админом</option>
                <option value="false">Убрать из админов</option>
            </select>
            <button onclick="updateRole()">Применить</button>
        </div>
        <button onclick="window.location.href='admin.html'" class="secondary">Назад</button>
    </div>
    <script src="../js/script.js"></script>
    <script>
        checkAuth(); requireAdmin();
        async function updateRole() {
            const data = {
                email: document.getElementById('userEmail').value,
                is_admin: document.getElementById('isAdmin').value === 'true'
            };
            try {
                await apiRequest('/admin/users/by-email', 'PATCH', data);
                alert("Права обновлены!");
            } catch(e) { alert(e.message); }
        }
    </script>
</body>
</html>