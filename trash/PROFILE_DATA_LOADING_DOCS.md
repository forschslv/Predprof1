# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –ü–æ–¥–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±—ç–∫–µ–Ω–¥–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ—Ñ–∏–ª—è

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±—ç–∫–µ–Ω–¥–∞:

1. **–î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/users/me`
2. **–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤** - –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/orders`

–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –§–∞–π–ª: `front12345/js/profile.js`

#### 1. –§—É–Ω–∫—Ü–∏—è `loadUserProfile()` (—É–ª—É—á—à–µ–Ω–Ω–∞—è)

```javascript
async function loadUserProfile() {
    try {
        // ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±–æ–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
        const [user, orders] = await Promise.all([
            apiRequest('/users/me'),      // –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            apiRequest('/orders')          // –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
        ]);
        
        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –ø—Ä–æ—Ñ–∏–ª—è
        document.getElementById('name').value = user.name || '';
        document.getElementById('secondary_name').value = user.secondary_name || '';
        document.getElementById('email').value = user.email;
        document.getElementById('status').value = user.status || '';
        document.getElementById('is_admin').value = user.is_admin ? '–î–∞' : '–ù–µ—Ç';
        document.getElementById('email_verified').value = user.email_verified ? '–î–∞' : '–ù–µ—Ç';
        
        return { user, orders };  // ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±–∞ –æ–±—ä–µ–∫—Ç–∞
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error);
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è: ' + error.message);
        window.location.href = 'main.html';
    }
}
```

#### 2. –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `displayOrders(orders)` (–Ω–æ–≤–∞—è)

```javascript
function displayOrders(orders) {
    const ordersContainer = document.getElementById('ordersHistory');
    
    // ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞
    if (!orders || orders.length === 0) {
        ordersContainer.innerHTML = '<p style="...">–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>';
        return;
    }
    
    // ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞ —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
    const ordersHTML = orders.map(order => {
        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º
        const date = new Date(order.week_start_date);
        const formattedDate = date.toLocaleDateString('ru-RU', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º HTML —ç–ª–µ–º–µ–Ω—Ç –∑–∞–∫–∞–∑–∞
        return `
            <div style="...">
                <div>–ó–∞–∫–∞–∑ #${order.id}</div>
                <div>–ù–µ–¥–µ–ª—è —Å ${formattedDate}</div>
                <div>${order.total_amount} ‚ÇΩ</div>
                <div>${getStatusText(order.status)}</div>
            </div>
        `;
    }).join('');
    
    ordersContainer.innerHTML = ordersHTML;
}
```

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (DOMContentLoaded)

```javascript
document.addEventListener('DOMContentLoaded', async () => {
    if (!localStorage.getItem('token')) {
        window.location.href = '/register_login/register';
        return;
    }
    
    // ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±–∞ –æ–±—ä–µ–∫—Ç–∞
    const { user, orders } = await loadUserProfile();
    
    // ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∑–∞–∫–∞–∑—ã
    displayOrders(orders);
    
    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
});
```

### –§–∞–π–ª: `front12345/profile.html`

#### –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª

```html
<hr style="margin: 30px 0; border-color: var(--border-color);">

<div class="form-group">
    <h3 style="margin-top: 0; color: var(--text-primary);">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h3>
    <div id="ordersHistory" style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; max-height: 400px; overflow-y: auto;">
        <p style="color: var(--text-secondary); text-align: center;">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤...</p>
    </div>
</div>
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### UserResponse (–∏–∑ `/users/me`)

```json
{
  "id": 1,
  "name": "–ò–≤–∞–Ω",
  "secondary_name": "–ü–µ—Ç—Ä–æ–≤",
  "email": "ivan@example.com",
  "status": "10 –∫–ª–∞—Å—Å",
  "is_admin": false,
  "email_verified": true
}
```

### OrderResponse (–∏–∑ `/orders`)

```json
[
  {
    "id": 1,
    "status": "completed",      // pending | paid | completed | cancelled
    "total_amount": 450.50,
    "week_start_date": "2024-02-12"
  },
  {
    "id": 2,
    "status": "paid",
    "total_amount": 320.00,
    "week_start_date": "2024-02-19"
  }
]
```

---

## üé® –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤

–ö–∞–∂–¥—ã–π –∑–∞–∫–∞–∑ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –∫–∞—Ä—Ç–æ—á–∫–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ó–∞–∫–∞–∑ #1                    450.50 ‚ÇΩ    ‚îÇ
‚îÇ –ù–µ–¥–µ–ª—è —Å 12 —Ñ–µ–≤—Ä–∞–ª—è 2024    –ó–∞–≤–µ—Ä—à–µ–Ω–æ  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤:**
- üü† **pending** (–û–∂–∏–¥–∞–Ω–∏–µ) - –æ—Ä–∞–Ω–∂–µ–≤—ã–π
- üü¢ **paid** (–û–ø–ª–∞—á–µ–Ω–æ) - –∑–µ–ª—ë–Ω—ã–π  
- üîµ **completed** (–ó–∞–≤–µ—Ä—à–µ–Ω–æ) - —Å–∏–Ω–∏–π
- üî¥ **cancelled** (–û—Ç–º–µ–Ω–µ–Ω–æ) - –∫—Ä–∞—Å–Ω—ã–π

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

```javascript
// –î–û (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è):
const user = await apiRequest('/users/me');      // ‚è±Ô∏è ~100ms
const orders = await apiRequest('/orders');      // ‚è±Ô∏è ~100ms
// –í—Å–µ–≥–æ: ~200ms

// –ü–û–°–õ–ï (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è):
const [user, orders] = await Promise.all([
    apiRequest('/users/me'),                     // ‚è±Ô∏è ~100ms
    apiRequest('/orders')                        // ‚è±Ô∏è ~100ms (–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!)
]);
// –í—Å–µ–≥–æ: ~100ms (–≤ 2 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ!)
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **–ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Bearer —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ü–∞—Ä–æ–ª–∏ –ù–ï –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è (–∫–∞–∫ —Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ 401 –æ—à–∏–±–∫–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π

‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- Try-catch –±–ª–æ–∫–∏ –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üìù API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|---------|-------------|
| GET | `/users/me` | –ü—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚úÖ Bearer |
| GET | `/orders` | –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚úÖ Bearer |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:

1. ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è (–∏–º—è, —Ñ–∞–º–∏–ª–∏—è, email, —Å—Ç–∞—Ç—É—Å –∏ —Ç.–¥.)
2. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ (–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å)
3. ‚úÖ –ó–∞–∫–∞–∑—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∏ —Ü–≤–µ—Ç–∞
4. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å F12)

---

## üìö –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫

### –ò–∑–º–µ–Ω—è–µ–º—ã–µ –ø–æ–ª—è –ø—Ä–æ—Ñ–∏–ª—è (Editable)
- ‚úèÔ∏è –ò–º—è (`name`)
- ‚úèÔ∏è –§–∞–º–∏–ª–∏—è (`secondary_name`)

### –¢–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (Read-only)
- üëÅÔ∏è Email (–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω)
- üëÅÔ∏è –°—Ç–∞—Ç—É—Å (–∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º)
- üëÅÔ∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π)
- üëÅÔ∏è Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π)

### –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
- üìã ID –∑–∞–∫–∞–∑–∞
- üìÖ –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –Ω–µ–¥–µ–ª–∏
- üí∞ –û–±—â–∞—è —Å—É–º–º–∞
- üîî –°—Ç–∞—Ç—É—Å

---

## üîî –ó–∞–º–µ—Ç–∫–∏

- –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ—Ñ–∏–ª—è
- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –æ–±—Ä–∞—Ç–Ω–æ–º —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ —Ä–∞–∑–¥–µ–ª–∞ –∑–∞–∫–∞–∑–æ–≤ - 400px —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤–æ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏

