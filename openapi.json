{"openapi":"3.1.0","info":{"title":"Canteen API","version":"0.1.0"},"paths":{"/register":{"post":{"summary":"Register","operationId":"register_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/users/me":{"get":{"summary":"Read Users Me","operationId":"read_users_me_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/verify-code":{"post":{"summary":"Verify Code","operationId":"verify_code_verify_code_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyCodeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyCodeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/menu":{"get":{"summary":"Get Global Menu","operationId":"get_global_menu_menu_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/DishResponse"},"type":"array","title":"Response Get Global Menu Menu Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/menu/dish":{"post":{"summary":"Create Dish","operationId":"create_dish_menu_dish_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DishCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DishResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/menu/upload":{"post":{"summary":"Upload Menu File","operationId":"upload_menu_file_menu_upload_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"is_provider","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Is Provider"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_menu_file_menu_upload_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/module-menu":{"get":{"summary":"Get Module Menu","operationId":"get_module_menu_module_menu_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]},"post":{"summary":"Set Module Menu","operationId":"set_module_menu_module_menu_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModuleMenuRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/orders":{"post":{"summary":"Create Order","operationId":"create_order_orders_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/orders/{order_id}/pay":{"post":{"summary":"Pay Order","operationId":"pay_order_orders__order_id__pay_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","title":"Order Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_pay_order_orders__order_id__pay_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/orders/{order_id}/status":{"patch":{"summary":"Update Order Status","operationId":"update_order_status_admin_orders__order_id__status_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","title":"Order Id"}},{"name":"status","in":"query","required":true,"schema":{"$ref":"#/components/schemas/OrderStatus"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/reports/docx":{"get":{"summary":"Download Table Report","operationId":"download_table_report_admin_reports_docx_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_query","in":"query","required":true,"schema":{"type":"string","format":"date","title":"Date Query"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_pay_order_orders__order_id__pay_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_pay_order_orders__order_id__pay_post"},"Body_upload_menu_file_menu_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_menu_file_menu_upload_post"},"DayOrderRequest":{"properties":{"day_of_week":{"type":"integer","title":"Day Of Week"},"items":{"items":{"$ref":"#/components/schemas/OrderItemRequest"},"type":"array","title":"Items"}},"type":"object","required":["day_of_week","items"],"title":"DayOrderRequest"},"DishCreate":{"properties":{"name":{"type":"string","title":"Name"},"short_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Short Name"},"type":{"$ref":"#/components/schemas/DishType"},"composition":{"type":"string","title":"Composition"},"quantity_grams":{"type":"integer","title":"Quantity Grams"},"price_rub":{"type":"number","title":"Price Rub"},"barcode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Barcode"},"period":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Period"}},"type":"object","required":["name","type","composition","quantity_grams","price_rub"],"title":"DishCreate"},"DishResponse":{"properties":{"name":{"type":"string","title":"Name"},"short_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Short Name"},"type":{"$ref":"#/components/schemas/DishType"},"composition":{"type":"string","title":"Composition"},"quantity_grams":{"type":"integer","title":"Quantity Grams"},"price_rub":{"type":"number","title":"Price Rub"},"barcode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Barcode"},"period":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Period"},"id":{"type":"integer","title":"Id"},"is_provider":{"type":"boolean","title":"Is Provider"}},"type":"object","required":["name","type","composition","quantity_grams","price_rub","id","is_provider"],"title":"DishResponse"},"DishType":{"type":"string","enum":["MAIN","GARNISH","PREPARED","DRINK","SALAD","SOUP","BREAD"],"title":"DishType"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ModuleMenuEntry":{"properties":{"day_of_week":{"type":"integer","title":"Day Of Week"},"dish_ids":{"items":{"type":"integer"},"type":"array","title":"Dish Ids"}},"type":"object","required":["day_of_week","dish_ids"],"title":"ModuleMenuEntry"},"ModuleMenuRequest":{"properties":{"schedule":{"items":{"$ref":"#/components/schemas/ModuleMenuEntry"},"type":"array","title":"Schedule"}},"type":"object","required":["schedule"],"title":"ModuleMenuRequest"},"OrderCreate":{"properties":{"week_start_date":{"type":"string","format":"date","title":"Week Start Date"},"days":{"items":{"$ref":"#/components/schemas/DayOrderRequest"},"type":"array","title":"Days"}},"type":"object","required":["week_start_date","days"],"title":"OrderCreate"},"OrderItemRequest":{"properties":{"dish_id":{"type":"integer","title":"Dish Id"},"quantity":{"type":"integer","title":"Quantity"}},"type":"object","required":["dish_id","quantity"],"title":"OrderItemRequest"},"OrderResponse":{"properties":{"id":{"type":"integer","title":"Id"},"status":{"$ref":"#/components/schemas/OrderStatus"},"total_amount":{"type":"number","title":"Total Amount"},"week_start_date":{"type":"string","format":"date","title":"Week Start Date"}},"type":"object","required":["id","status","total_amount","week_start_date"],"title":"OrderResponse"},"OrderStatus":{"type":"string","enum":["PENDING","PAID","PROBLEM"],"title":"OrderStatus"},"RegisterResponse":{"properties":{"message":{"type":"string","title":"Message"},"user":{"$ref":"#/components/schemas/UserResponse"}},"type":"object","required":["message","user"],"title":"RegisterResponse"},"UserCreate":{"properties":{"name":{"type":"string","title":"Name"},"secondary_name":{"type":"string","title":"Secondary Name"},"email":{"type":"string","format":"email","title":"Email"},"status":{"type":"string","title":"Status"}},"type":"object","required":["name","secondary_name","email","status"],"title":"UserCreate"},"UserResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"secondary_name":{"type":"string","title":"Secondary Name"},"email":{"type":"string","title":"Email"},"status":{"type":"string","title":"Status"},"is_admin":{"type":"boolean","title":"Is Admin"},"email_verified":{"type":"boolean","title":"Email Verified"}},"type":"object","required":["id","name","secondary_name","email","status","is_admin","email_verified"],"title":"UserResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VerifyCodeRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"code":{"type":"string","title":"Code"}},"type":"object","required":["email","code"],"title":"VerifyCodeRequest"},"VerifyCodeResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"},"user":{"$ref":"#/components/schemas/UserResponse"}},"type":"object","required":["access_token","token_type","user"],"title":"VerifyCodeResponse"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}